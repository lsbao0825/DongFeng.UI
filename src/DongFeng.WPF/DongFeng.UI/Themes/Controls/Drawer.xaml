<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="clr-namespace:DongFeng.UI.Controls">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/DongFeng.UI;component/Themes/BaseStyles.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <Style TargetType="{x:Type controls:Drawer}">
        <Setter Property="Background" Value="{DynamicResource Brush_Surface}" />
        <Setter Property="BorderBrush" Value="{DynamicResource Brush_Border}" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Panel.ZIndex" Value="1000" />
        <!--  Default to collapsed so it doesn't block interaction  -->
        <Setter Property="Visibility" Value="Collapsed" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:Drawer}">
                    <Grid>
                        <!--  Mask Overlay  -->
                        <Border
                            x:Name="PART_Mask"
                            Background="#000000"
                            Opacity="0" />

                        <!--  Drawer Content Container  -->
                        <!--  Alignment will be set by Triggers based on Position  -->
                        <Border
                            x:Name="PART_Content"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}">
                            <Border.RenderTransform>
                                <TranslateTransform />
                            </Border.RenderTransform>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="*" />
                                </Grid.RowDefinitions>

                                <!--  Header  -->
                                <Border
                                    Grid.Row="0"
                                    Padding="{DynamicResource Padding_Input}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="0,0,0,1">
                                    <Grid>
                                        <ContentPresenter
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            Content="{TemplateBinding Header}"
                                            TextBlock.FontSize="{DynamicResource FontSize_Large}"
                                            TextBlock.FontWeight="Bold"
                                            TextBlock.Foreground="{DynamicResource Brush_Text_Primary}" />
                                        <!--  Optional Close Button could go here if needed  -->
                                        <Button
                                            x:Name="PART_CloseButton"
                                            Width="32"
                                            Height="32"
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Center"
                                            Background="Transparent"
                                            BorderThickness="0"
                                            Command="{x:Static controls:Drawer.CloseCommand}"
                                            Cursor="Hand"
                                            Foreground="{DynamicResource Brush_Text_Secondary}">
                                            <Path
                                                Width="12"
                                                Height="12"
                                                Data="M1,1 L11,11 M1,11 L11,1"
                                                Stretch="Uniform"
                                                Stroke="{Binding RelativeSource={RelativeSource AncestorType=Button}, Path=Foreground}"
                                                StrokeThickness="2" />
                                        </Button>
                                    </Grid>
                                </Border>

                                <!--  Body  -->
                                <ContentPresenter Grid.Row="1" />
                            </Grid>
                        </Border>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <!--  Position: Right (Default)  -->
                        <Trigger Property="Position" Value="Right">
                            <Setter TargetName="PART_Content" Property="HorizontalAlignment" Value="Right" />
                            <Setter TargetName="PART_Content" Property="VerticalAlignment" Value="Stretch" />
                            <Setter TargetName="PART_Content" Property="Width" Value="300" />
                            <Setter TargetName="PART_Content" Property="BorderThickness" Value="1,0,0,0" />
                        </Trigger>
                        <!--  Position: Left  -->
                        <Trigger Property="Position" Value="Left">
                            <Setter TargetName="PART_Content" Property="HorizontalAlignment" Value="Left" />
                            <Setter TargetName="PART_Content" Property="VerticalAlignment" Value="Stretch" />
                            <Setter TargetName="PART_Content" Property="Width" Value="300" />
                            <Setter TargetName="PART_Content" Property="BorderThickness" Value="0,0,1,0" />
                        </Trigger>
                        <!--  Position: Top  -->
                        <Trigger Property="Position" Value="Top">
                            <Setter TargetName="PART_Content" Property="HorizontalAlignment" Value="Stretch" />
                            <Setter TargetName="PART_Content" Property="VerticalAlignment" Value="Top" />
                            <Setter TargetName="PART_Content" Property="Height" Value="300" />
                            <Setter TargetName="PART_Content" Property="BorderThickness" Value="0,0,0,1" />
                        </Trigger>
                        <!--  Position: Bottom  -->
                        <Trigger Property="Position" Value="Bottom">
                            <Setter TargetName="PART_Content" Property="HorizontalAlignment" Value="Stretch" />
                            <Setter TargetName="PART_Content" Property="VerticalAlignment" Value="Bottom" />
                            <Setter TargetName="PART_Content" Property="Height" Value="300" />
                            <Setter TargetName="PART_Content" Property="BorderThickness" Value="0,1,0,0" />
                        </Trigger>

                        <!--  Header Visibility  -->
                        <Trigger Property="Header" Value="{x:Null}">
                            <!--  If header is null, maybe hide the border?  -->
                            <!--  Or we can just leave it empty. For cleanliness let's hide the border height  -->
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>

