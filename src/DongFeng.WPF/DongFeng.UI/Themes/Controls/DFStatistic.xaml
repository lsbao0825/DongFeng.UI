<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="clr-namespace:DongFeng.UI.Controls"
                    xmlns:converters="clr-namespace:DongFeng.UI.Converters">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/DongFeng.UI;component/Themes/BaseStyles.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <converters:ObjectToVisibilityConverter x:Key="ObjectToVisibilityConverter" />

    <Style TargetType="{x:Type controls:DFStatistic}">
        <Setter Property="Foreground" Value="{DynamicResource Brush_Text_Primary}" />
        <!-- Add Background transparent to catch hits if needed, though StackPanel ignores it mostly -->
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:DFStatistic}">
                    <StackPanel Background="{TemplateBinding Background}">
                        <!-- Label -->
                        <TextBlock Text="{TemplateBinding Label}"
                                   Foreground="{DynamicResource Brush_Text_Secondary}"
                                   FontSize="14"
                                   Margin="0,0,0,4"
                                   Visibility="{TemplateBinding Label, Converter={StaticResource ObjectToVisibilityConverter}}"/>
                        
                        <!-- Value Row -->
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Bottom">
                            <!-- Icon -->
                            <!-- Optimize: VerticalAlignment Center usually better for icons relative to text -->
                            <ContentPresenter Content="{TemplateBinding Icon}"
                                              Margin="0,0,8,0"
                                              VerticalAlignment="Bottom" 
                                              TextBlock.Foreground="{TemplateBinding Foreground}"/>
                                              <!-- Changed to Bottom to align with baseline if possible, or Center if icon is large. Center is safer. -->
                            
                            <!-- Prefix -->
                            <TextBlock Text="{TemplateBinding Prefix}"
                                       FontSize="14" 
                                       FontWeight="Normal"
                                       Margin="0,0,4,2"
                                       VerticalAlignment="Bottom"
                                       Foreground="{TemplateBinding Foreground}"
                                       Visibility="{TemplateBinding Prefix, Converter={StaticResource ObjectToVisibilityConverter}}"/>
                                       <!-- Optimized: Smaller font for prefix looks more professional -->
                            
                            <!-- Value -->
                            <ContentPresenter Content="{TemplateBinding Value}"
                                              TextBlock.FontSize="24"
                                              TextBlock.FontWeight="Bold"
                                              VerticalAlignment="Bottom"
                                              TextBlock.Foreground="{TemplateBinding Foreground}"/>
                            
                            <!-- Suffix -->
                            <TextBlock Text="{TemplateBinding Suffix}"
                                       FontSize="14"
                                       FontWeight="Normal"
                                       Margin="4,0,0,2"
                                       VerticalAlignment="Bottom"
                                       Foreground="{TemplateBinding Foreground}"
                                       Visibility="{TemplateBinding Suffix, Converter={StaticResource ObjectToVisibilityConverter}}"/>
                                       <!-- Optimized: Smaller font for suffix -->
                        </StackPanel>
                    </StackPanel>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>
